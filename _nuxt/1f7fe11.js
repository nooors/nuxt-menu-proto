(window.webpackJsonp=window.webpackJsonp||[]).push([[43,16],{486:function(e,t,n){"use strict";n.r(t);var r={props:["dialog","propSpanish","propCatalan","propEnglish"],data:function(){return{languages:{spanish:"",catalan:"",english:""},rules:{required:function(e){return!!e||"This field is required"}}}},methods:{saveLanguages:function(){this.$refs.form.validate()&&this.$emit("languages",this.languages)}},created:function(){this.languages.spanish=this.propSpanish,this.languages.catalan=this.propCatalan,this.languages.english=this.propEnglish}},o=n(71),l=n(78),c=n.n(l),d=n(247),m=n(455),h=n(454),v=n(464),f=n(484),T=n(213),x=n(466),D=n(469),O=n(523),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{shaped:""}},[n("v-card-text",[n("v-form",{ref:"form"},[n("v-row",[n("v-col",[n("v-textarea",{attrs:{dense:"",value:"propSpanish",required:"",rules:[e.rules.required],label:"Español"},model:{value:e.languages.spanish,callback:function(t){e.$set(e.languages,"spanish",t)},expression:"languages.spanish"}})],1)],1),e._v(" "),n("v-row",[n("v-col",[n("v-textarea",{attrs:{dense:"",required:"",value:"propCatalan",rules:[e.rules.required],label:"Català"},model:{value:e.languages.catalan,callback:function(t){e.$set(e.languages,"catalan",t)},expression:"languages.catalan"}})],1)],1),e._v(" "),n("v-row",[n("v-col",[n("v-textarea",{attrs:{dense:"",value:"propEnglish",required:"",rules:[e.rules.required],label:"English"},model:{value:e.languages.english,callback:function(t){e.$set(e.languages,"english",t)},expression:"languages.english"}})],1)],1)],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"pink",fab:"","x-small":""},on:{click:e.saveLanguages}},[n("v-icon",[e._v("mdi-content-save")])],1),e._v(" "),n("v-btn",{attrs:{color:"pink",fab:"","x-small":""},on:{click:function(t){return e.$emit("closeDialog")}}},[n("v-icon",[e._v("mdi-close")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;c()(component,{VBtn:d.a,VCard:m.a,VCardActions:h.a,VCardText:h.c,VCol:v.a,VForm:f.a,VIcon:T.a,VRow:x.a,VSpacer:D.a,VTextarea:O.a})},489:function(e,t,n){var content=n(513);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(20).default)("2cb871b1",content,!0,{sourceMap:!1})},490:function(e,t,n){"use strict";n.r(t);var r={props:["dialog","cardText","cardTitle"]},o=n(71),l=n(78),c=n.n(l),d=n(455),m=n(454),h=n(495),v=n(466),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{justify:"center"}},[n("v-dialog",{attrs:{"max-width":"400"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"text-center"},[e._v("\n        "+e._s(e.cardTitle)+"\n      ")]),e._v(" "),n("v-card-text",{staticClass:"text-center pink--text"},[e._v("\n        "+e._s(e.cardText)+"\n      ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;c()(component,{VCard:d.a,VCardText:m.c,VCardTitle:m.d,VDialog:h.a,VRow:v.a})},504:function(e,t,n){"use strict";n.r(t);var r={name:"tableContentLayout",props:["name"]},o=(n(512),n(71)),l=n(78),c=n.n(l),d=n(455),m=n(472),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"d-flex flex-column"},[n("h1",{staticClass:"mb-5"},[e._v(e._s(e.name))]),e._v(" "),n("v-card",{staticClass:"mb-7 mr-7 px-7 py-3",attrs:{shaped:"",elevation:"10"}},[e._t("table-content")],2)],1)}),[],!1,null,"357839a8",null);t.default=component.exports;c()(component,{VCard:d.a,VContainer:m.a})},512:function(e,t,n){"use strict";n(489)},513:function(e,t,n){var r=n(19)(!1);r.push([e.i,"v-container[data-v-357839a8]{height:90vh}.v-menu__content[data-v-357839a8]{overflow:unset;contain:unset}",""]),e.exports=r},591:function(e,t,n){"use strict";n.r(t);n(11),n(9),n(8),n(15),n(10),n(16);var r=n(2),o=n(13),l=(n(65),n(49),n(29),n(4),n(103),n(490)),c=n(486),d=n(504);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var v={components:{LanguagesInput:c.default,tableContentLayout:d.default,fetchMessage:l.default},data:function(){return{families:[],pTypes:[],departments:[],dialog:!1,shortNameDialog:!1,descriptionDialog:!1,dialogDelete:!1,rules:{required:function(e){return!!e||"Required."}},headers:[{text:"Products",align:"start",sortable:!1,value:"shortNameCreateDTO[0].name"},{text:"Families",value:"familiesDTO.name"},{text:"Departments",value:"departmentsDTO[0].name"},{text:"Product Types",value:"ptypesDTO.name"},{text:"Description",value:"descriptionDTOs[0].name"},{text:"Actions",value:"actions",sortable:!1}],products:[],editedIndex:-1,editedItem:{shortNameCreateDTO:[{name:""},{name:""},{name:""}],familiesDTO:{id:1,name:""},departmentsDTO:[{id:1,name:""}],ptypesDTO:{id:1,name:""},descriptionDTOs:[{name:""},{name:""},{name:""}]},defaultItem:{shortNameCreateDTO:[{name:""},{name:""},{name:""}],familiesDTO:{id:1,name:""},departmentsDTO:[{id:1,name:""}],ptypesDTO:{id:1,name:""},descriptionDTOs:[{name:""},{name:""},{name:""}]},name:"Products",isInvalid:!1,dialogProp:!1,cardTextProp:"",cardTitleProp:""}},fetch:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("getProducts");case 2:return t.next=4,e.$store.dispatch("getFamilies");case 4:return t.next=6,e.$store.dispatch("getDepartments");case 6:return t.next=8,e.$store.dispatch("getPtypes");case 8:case"end":return t.stop()}}),t)})))()},computed:{formTitle:function(){return-1===this.editedIndex?"New Product":"Edit Product"},productsStore:function(){return this.$store.getters.getProducts},familiesStore:function(){return this.$store.getters.getFamilies},departmentsStore:function(){return this.$store.getters.getDepartments},pTypesStore:function(){return this.$store.getters.getPtypes},language:function(){return this.$store.getters.getLanguageSelected}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()},productsStore:function(){this.products=this.$store.getters.getProducts.map((function(a){return h({},a)})),this.products=JSON.parse(JSON.stringify(this.$store.getters.getProducts))},pTypesStore:function(){this.pTypes=this.$store.getters.getPtypes.map((function(a){return h({},a)})),console.log(this.pTypes)},familiesStore:function(){this.families=this.$store.getters.getFamilies.map((function(a){return h({},a)})),console.log(this.pTypes)},departmentsStore:function(){this.departments=this.$store.getters.getDepartments.map((function(a){return h({},a)}))},languageStore:function(){this.language=this.$store.getters.getLanguageSelected}},methods:{editItem:function(e){this.editedIndex=this.products.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.editedIndex=this.products.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(){var e=this;try{this.$store.dispatch("deleteProduct",this.products[this.editedIndex].id),this.cardTextProp="This product won't bother again",this.cardTitleProp="Product deleted succesfully",this.dialogProp=!0,setTimeout((function(){e.dialogProp=!1}),4e3),this.refreshData(),this.closeDelete()}catch(t){this.cardTextProp="Try again please",this.cardTitleProp="Je suis desolée ".concat(t),this.dialogProp=!0,setTimeout((function(){e.dialogProp=!1}),4e3)}},editShortName:function(e){this.editedItem.shortNameCreateDTO[0].name=e.spanish,this.editedItem.shortNameCreateDTO[1].name=e.catalan,this.editedItem.shortNameCreateDTO[2].name=e.english,this.shortNameDialog=!1},editDescription:function(e){this.editedItem.descriptionDTOs[0].name=e.spanish,this.editedItem.descriptionDTOs[1].name=e.catalan,this.editedItem.descriptionDTOs[2].name=e.english,this.descriptionDialog=!1},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},save:function(){var e=this;if(this.editedIndex>-1)try{this.$store.dispatch("editProduct",this.products[this.editedIndex]),this.cardText="The info user is updated",this.cardTitle="Everything is gonna be alright",this.dialogProp=!0,setTimeout((function(){e.componentProps.dialog=!1}),4e3)}catch(t){this.cardTextProp="Try again",this.cardTitleProp="Sorry sugar something went wrong",this.dialogProp=!0,setTimeout((function(){e.dialogProp=!1}),4e3)}else{if(!this.validate())return void(this.isInvalid=!0);try{this.$store.dispatch("addProduct",this.editedItem),this.cardTextProp="A new user is added",this.cardTitleProp="Good Vibrations!",this.dialogProp=!0,setTimeout((function(){e.dialogProp=!1}),4e3)}catch(t){this.cardTextProp="Try again, backend guy was drunk",this.cardTitleProp="Ooops, they did it again",this.dialogProp=!0,setTimeout((function(){e.dialogProp=!1}),4e3)}}this.close()},validate:function(){return!(this.editedItem.shortNameCreateDTO.some((function(a){return""===a.name}))||""===this.editedItem.familiesDTO||this.editedItem.departmentsDTO.some((function(a){return""===a.name}))||""===this.editedItem.ptypesDTO.name||this.editedItem.descriptionDTOs.some((function(a){return""===a.name})))&&(this.isInvalid=!1,!0)},refreshData:function(){this.$store.dispatch("getProducts")},dialogOpen:function(){return console.log(payload),this.dialog=!0}}},f=n(71),T=n(78),x=n.n(T),D=n(247),O=n(455),_=n(454),y=n(464),I=n(472),P=n(581),C=n(495),k=n(213),w=n(466),$=n(515),V=n(469),S=n(523),j=n(64),component=Object(f.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("fetch-message",{attrs:{dialog:e.dialogProp,cardText:e.cardTextProp,cardTitle:e.cardTitleProp}}),e._v(" "),n("table-content-layout",{attrs:{name:e.name,openDialog:e.dialogOpen},scopedSlots:e._u([{key:"table-content",fn:function(){return[n("v-data-table",{attrs:{headers:e.headers,items:e.products},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{staticClass:"mt-3",attrs:{elevation:"0"}},[n("v-spacer"),e._v(" "),n("v-dialog",{attrs:{"max-width":"800px",elevation:"10"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,o=t.attrs;return[n("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"pink",dark:"",fab:""}},"v-btn",o,!1),r),[n("v-icon",[e._v("mdi-plus")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),n("v-card",{attrs:{shaped:"",elevation:"elevation-10"}},[n("v-card-title",[n("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])]),e._v(" "),n("form",{ref:"formValidate",attrs:{"lazy-validation":""}},[n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-dialog",{attrs:{"max-width":"800px"},model:{value:e.shortNameDialog,callback:function(t){e.shortNameDialog=t},expression:"shortNameDialog"}},[n("languages-input",{attrs:{propSpanish:e.editedItem.shortNameCreateDTO[0].name,propCatalan:e.editedItem.shortNameCreateDTO[1].name,propEnglish:e.editedItem.shortNameCreateDTO[2].name},on:{languages:e.editShortName,closeDialog:function(t){e.shortNameDialog=!1}}})],1),e._v(" "),n("v-textarea",{attrs:{label:"Product name",hint:"Product name","persistent-hint":"",rows:"2","auto-grow":"","row-height":"15",rules:[e.rules.required]},on:{click:function(t){t.stopPropagation(),e.shortNameDialog=!0}},model:{value:e.editedItem.shortNameCreateDTO[e.language].name,callback:function(t){e.$set(e.editedItem.shortNameCreateDTO[e.language],"name",t)},expression:"\n                              editedItem.shortNameCreateDTO[language].name\n                            "}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-select",{attrs:{items:e.families,"item-text":"name","item-value":"id","return-object":"",label:"Family","menu-props":{maxHeight:"400"},hint:"Family","persistent-hint":"",rules:[e.rules.required],"single-line":""},model:{value:e.editedItem.familiesDTO,callback:function(t){e.$set(e.editedItem,"familiesDTO",t)},expression:"editedItem.familiesDTO"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-select",{attrs:{items:e.departments,"item-text":"name","item-value":"id","return-object":"",label:"Departments",hint:"Departments","persistent-hint":"",rules:[e.rules.required],"single-line":""},model:{value:e.editedItem.departmentsDTO[0],callback:function(t){e.$set(e.editedItem.departmentsDTO,0,t)},expression:"editedItem.departmentsDTO[0]"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-select",{attrs:{items:e.pTypes,"item-value":"id","item-text":"name","return-object":"",label:"Product types",hint:"Product types","persistent-hint":"",rules:[e.rules.required],"single-line":""},model:{value:e.editedItem.ptypesDTO,callback:function(t){e.$set(e.editedItem,"ptypesDTO",t)},expression:"editedItem.ptypesDTO"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-dialog",{attrs:{"max-width":"800px"},model:{value:e.descriptionDialog,callback:function(t){e.descriptionDialog=t},expression:"descriptionDialog"}},[n("languages-input",{attrs:{propSpanish:e.editedItem.descriptionDTOs[0].name,propCatalan:e.editedItem.descriptionDTOs[1].name,propEngish:e.editedItem.descriptionDTOs[2].name},on:{languages:e.editDescription,closeDialog:function(t){e.descriptionDialog=!1}}})],1),e._v(" "),n("v-textarea",{attrs:{label:"Description",hint:"Description","persistent-hint":"",rows:"2","auto-grow":"",rules:[e.rules.required],"row-height":"15"},on:{click:function(t){t.stopPropagation(),e.descriptionDialog=!0}},model:{value:e.editedItem.descriptionDTOs[e.language].name,callback:function(t){e.$set(e.editedItem.descriptionDTOs[e.language],"name",t)},expression:"\n                              editedItem.descriptionDTOs[language].name\n                            "}})],1)],1)],1)],1)],1),e._v(" "),e.isInvalid?n("div",[n("p",{staticClass:"ml-5 pink--text"},[e._v('\n                    "You need to fill all the fields in order to create a new\n                    product"\n                  ')])]):e._e(),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"pink",dark:"",fab:""},on:{click:e.close}},[n("v-icon",[e._v("\n                      mdi-close\n                    ")])],1),e._v(" "),n("v-btn",{attrs:{color:"pink",dark:"",fab:""},on:{click:e.save}},[n("v-icon",[e._v("\n                      mdi-content-save\n                    ")])],1)],1)],1)],1),e._v(" "),n("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5"},[e._v("Are you sure you want to delete this item?")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancel")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("OK")]),e._v(" "),n("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var r=t.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"pink"},on:{click:function(t){return e.editItem(r)}}},[e._v("\n            mdi-pencil\n          ")]),e._v(" "),n("v-icon",{attrs:{small:"",color:"pink"},on:{click:function(t){return e.deleteItem(r)}}},[e._v("\n            mdi-delete\n          ")])]}},{key:"no-data",fn:function(){},proxy:!0}])})]},proxy:!0}])})],1)}),[],!1,null,null,null);t.default=component.exports;x()(component,{FetchMessage:n(490).default,LanguagesInput:n(486).default,TableContentLayout:n(504).default}),x()(component,{VBtn:D.a,VCard:O.a,VCardActions:_.a,VCardText:_.c,VCardTitle:_.d,VCol:y.a,VContainer:I.a,VDataTable:P.a,VDialog:C.a,VIcon:k.a,VRow:w.a,VSelect:$.a,VSpacer:V.a,VTextarea:S.a,VToolbar:j.a})}}]);